<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OmniAI | Multi-Model Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .glass { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px); }
        .chat-container::-webkit-scrollbar { width: 5px; }
        .chat-container::-webkit-scrollbar-thumb { background: #4a5568; border-radius: 10px; }
    </style>
</head>
<body class="bg-slate-900 text-gray-100 h-screen flex flex-col">

    <header class="p-4 border-b border-gray-800 flex justify-between items-center glass">
        <h1 class="text-xl font-bold bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent">
            OmniAI <span class="text-xs font-light text-gray-500">v1.0</span>
        </h1>
        <div class="flex gap-4">
            <select id="modelSelector" class="bg-gray-800 border border-gray-700 rounded px-2 py-1 text-sm outline-none">
                <option value="auto">ðŸ¤– Auto-Route</option>
                <option value="gpt-4">OpenAI GPT-4</option>
                <option value="gemini">Google Gemini</option>
                <option value="deepseek">DeepSeek (Coding)</option>
                <option value="grok">xAI Grok</option>
            </select>
            <button class="hover:text-blue-400"><i class="fas fa-user-circle text-xl"></i></button>
        </div>
    </header>

    <main id="chatWindow" class="flex-1 overflow-y-auto p-4 space-y-4 chat-container">
        <div class="flex justify-start">
            <div class="glass p-3 rounded-lg max-w-[80%] border border-gray-800">
                Hello! I am your multi-model assistant. I can switch between models based on your needs.
            </div>
        </div>
    </main>

    <footer class="p-4 glass border-t border-gray-800">
        <div class="max-w-4xl mx-auto flex gap-2">
            <button class="p-2 text-gray-400 hover:text-white"><i class="fas fa-paperclip"></i></button>
            <input type="text" id="userInput" placeholder="Type a message..." 
                   class="flex-1 bg-gray-800 border border-gray-700 rounded-full px-4 py-2 focus:outline-none focus:border-blue-500">
            <button onclick="handleSendMessage()" id="sendBtn" 
                    class="bg-blue-600 hover:bg-blue-500 px-4 py-2 rounded-full transition-all">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </footer>

    <script>
        // --- CORE LOGIC ---
        
        const chatWindow = document.getElementById('chatWindow');
        const userInput = document.getElementById('userInput');
        const modelSelector = document.getElementById('modelSelector');

        // Automatic Router Logic
        function routeModel(text) {
            const prompt = text.toLowerCase();
            if (prompt.includes('code') || prompt.includes('debug')) return 'DeepSeek';
            if (prompt.includes('news') || prompt.includes('today')) return 'Grok';
            if (prompt.includes('research') || prompt.includes('summary')) return 'Gemini';
            return 'GPT-4';
        }

        async function handleSendMessage() {
            const text = userInput.value.trim();
            if (!text) return;

            // 1. Add User Message to UI
            appendMessage(text, 'user');
            userInput.value = '';

            // 2. Show Loading
            const loadingId = appendMessage("Thinking...", 'ai', true);

            // 3. Select Model
            const selectedMode = modelSelector.value;
            const activeModel = selectedMode === 'auto' ? routeModel(text) : selectedMode;

            try {
                // 4. Call Backend API (Your FastAPI URL)
                const response = await fetch('https://your-api-url.com/generate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        message: text, 
                        model: activeModel 
                    })
                });
                
                const data = await response.json();
                updateMessage(loadingId, data.reply, activeModel);
            } catch (error) {
                updateMessage(loadingId, "Error connecting to server. Check API setup.", "System");
            }
        }

        function appendMessage(text, sender, isLoading = false) {
            const id = Date.now();
            const div = document.createElement('div');
            div.className = `flex ${sender === 'user' ? 'justify-end' : 'justify-start'}`;
            div.innerHTML = `
                <div id="${id}" class="${sender === 'user' ? 'bg-blue-700' : 'glass border border-gray-800'} p-3 rounded-lg max-w-[80%]">
                    ${text}
                </div>
            `;
            chatWindow.appendChild(div);
            chatWindow.scrollTop = chatWindow.scrollHeight;
            return id;
        }

        function updateMessage(id, text, modelName) {
            const el = document.getElementById(id);
            el.innerHTML = `<small class="block text-blue-400 text-[10px] mb-1 font-bold">${modelName.toUpperCase()}</small>${text}`;
        }

        // Enter Key Listener
        userInput.addEventListener("keypress", (e) => {
            if (e.key === "Enter") handleSendMessage();
        });
    </script>
</body>
</html>
